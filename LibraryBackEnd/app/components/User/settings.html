<ol class="breadcrumb">
    <li><a href="" ng-href="#!/home">Home</a></li>
    <li class="active">Settings</li>
</ol>

<div class="page-header">
    <h3>Settings</h3>
</div>
<div ng-show="user.role == 'STUDENT' || user.role == 'FACULTY'">
    <uib-accordion close-others="true">

        <div uib-accordion-group class="panel-primary" is-open="true">
            <uib-accordion-heading>
                Profile
            </uib-accordion-heading>

            <div class="col-md-offset-3 col-md-6">
                <div class="form-group">
                    <label for="rollNo">Roll Number</label>
                    <input type="text" name="rollNo" class="form-control" value="{{user.rollNo}}" disabled />
                </div>
                <div class="form-group">
                    <label for="fullName">Name</label>
                    <input type="text" name="fullName" class="form-control" value="{{user.fullName}}" disabled />
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="text" name="email" class="form-control" value="{{user.email}}" disabled />
                </div>
                <div class="form-group">
                    <label for="course">Course</label>
                    <input type="text" name="course" class="form-control" value="{{user.course}}" disabled />
                </div>
                <div class="form-group">
                    <label for="issueCount">Book Issued</label>
                    <input type="text" name="issueCount" class="form-control" value="{{user.issueCount}}" disabled />
                </div>
                <div class="form-group">
                    <label for="fine">Fine</label>
                    <input type="text" name="fine" class="form-control" value="{{user.fine}}" disabled />
                </div>

                <div class="form-group">
                    <label for="yearOfAdmission">Year Of Admission</label>
                    <input type="text" name="yearOfAdmission" class="form-control" value="{{user.yearOfAdmission}}" disabled />
                </div>

                <div class="form-group">
                    <label for="status">Status</label>
                    <input type="text" name="status" class="form-control" value="{{user.status}}" disabled />
                </div>
            </div>

        </div>

        <div uib-accordion-group class="panel-primary">
            <uib-accordion-heading>
                Change Password
            </uib-accordion-heading>
            <div class="col-md-offset-3 col-md-6">
                <form name="setPasswordForm" ng-submit="userCtrl.changePassword()" role="form" novalidate>
                    <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.oldPassword.$invalid && setPasswordForm.oldPassword.$touched
                          || setPasswordForm.oldPassword.$invalid && setPasswordForm.$submitted,
                         'has-success has-feedback': setPasswordForm.oldPassword.$valid
                          || setPasswordForm.oldPassword.$valid && setPasswordForm.$submitted}">
                        <label for="oldPassword">Old Password</label>
                        <input type="password"
                               name="oldPassword"
                               class="form-control"
                               placeholder="Enter Old Password"
                               ng-model="userCtrl.passwordModel.oldPassword"
                               required />

                        <span class="glyphicon form-control-feedback"
                              ng-class="{'glyphicon-ok': setPasswordForm.oldPassword.$valid || setPasswordForm.oldPassword.$valid && setPasswordForm.$submitted,
                          'glyphicon-remove': setPasswordForm.oldPassword.$invalid && setPasswordForm.oldPassword.$touched || setPasswordForm.oldPassword.$invalid && setPasswordForm.$submitted}">
                        </span>

                        <div ng-show="setPasswordForm.oldPassword.$invalid && setPasswordForm.oldPassword.$touched || setPasswordForm.$submitted">
                            <span ng-show="setPasswordForm.oldPassword.$error.required" class="text-danger small">Please, provide password.</span>
                        </div>
                    </div>
                    <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched
                          || setPasswordForm.newPassword.$invalid && setPasswordForm.$submitted,
                         'has-success has-feedback': setPasswordForm.newPassword.$valid
                          || setPasswordForm.newPassword.$valid && setPasswordForm.$submitted}">
                        <label for="newPassword">New Password</label>
                        <input type="password"
                               name="newPassword"
                               class="form-control"
                               placeholder="Enter New Password"
                               ng-model="userCtrl.passwordModel.newPassword"
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}"
                               required />

                        <span class="glyphicon form-control-feedback"
                              ng-class="{'glyphicon-ok': setPasswordForm.newPassword.$valid || setPasswordForm.newPassword.$valid && setPasswordForm.$submitted,
                          'glyphicon-remove': setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched || setPasswordForm.newPassword.$invalid && setPasswordForm.$submitted}">
                        </span>

                        <div ng-show="setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched || setPasswordForm.$submitted">
                            <span ng-show="setPasswordForm.newPassword.$error.required" class="text-danger small">Please, provide password.</span>
                            <span ng-show="setPasswordForm.newPassword.$error.pattern" class="text-danger small">Password must contain atleast 8 charachters, numbers, uppercase letter and special charachter.</span>
                        </div>
                    </div>
                    <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched
                          || setPasswordForm.confirmPassword.$invalid && setPasswordForm.$submitted || (userCtrl.passwordModel.newPassword !== userCtrl.passwordModel.confirmPassword) && setPasswordForm.confirmPassword.$touched,
                         'has-success has-feedback': setPasswordForm.confirmPassword.$valid
                          || setPasswordForm.confirmPassword.$valid && setPasswordForm.$submitted || (userCtrl.passwordModel.newPassword === userCtrl.passwordModel.confirmPassword) && setPasswordForm.confirmPassword.$touched }">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password"
                               name="confirmPassword"
                               class="form-control"
                               placeholder="Enter New Password"
                               ng-model="userCtrl.passwordModel.confirmPassword"
                               required />
                        <span class="glyphicon form-control-feedback"
                              ng-class="{'glyphicon-ok': setPasswordForm.confirmPassword.$valid || setPasswordForm.confirmPassword.$valid && setPasswordForm.$submitted || (userCtrl.passwordModel.newPassword === userCtrl.passwordModel.confirmPassword) && setPasswordForm.confirmPassword.$touched,
                    'glyphicon-remove': setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched
                    || setPasswordForm.confirmPassword.$invalid && setPasswordForm.$submitted
                    || (userCtrl.passwordModel.newPassword !== userCtrl.passwordModel.confirmPassword)
                    && setPasswordForm.confirmPassword.$touched}">
                        </span>

                        <div ng-show="setPasswordForm.confirmPassword.$dirty || setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched || setPasswordForm.$submitted">
                            <span ng-show="setPasswordForm.confirmPassword.$error.required" class="text-danger small">Please, provide password same as above.</span>
                            <span ng-show="(!setPasswordForm.confirmPassword.$error.required) && (userCtrl.passwordModel.newPassword !== userCtrl.passwordModel.confirmPassword)" class="text-danger small">Password doesn't match</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Change Password" ng-disabled="setPasswordForm.$invalid" class="btn btn-success col-md-12" />
                    </div>
                </form>
            </div>
        </div>

    </uib-accordion>
</div>

<div ng-show="user.role == 'ADMIN' || user.role == 'LIBRARIAN'">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Change Password</h3>
        </div>
        <div class="panel-body">
            <div class="col-md-offset-3 col-md-6">
                <form name="setPasswordForm" ng-submit="userCtrl.changePassword()" role="form" novalidate>
                    <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.oldPassword.$invalid && setPasswordForm.oldPassword.$touched
                          || setPasswordForm.oldPassword.$invalid && setPasswordForm.$submitted,
                         'has-success has-feedback': setPasswordForm.oldPassword.$valid
                          || setPasswordForm.oldPassword.$valid && setPasswordForm.$submitted}">
                        <label for="oldPassword">Old Password</label>
                        <input type="password"
                               name="oldPassword"
                               class="form-control"
                               placeholder="Enter Old Password"
                               ng-model="userCtrl.passwordModel.oldPassword"
                               required />

                        <span class="glyphicon form-control-feedback"
                              ng-class="{'glyphicon-ok': setPasswordForm.oldPassword.$valid || setPasswordForm.oldPassword.$valid && setPasswordForm.$submitted,
                          'glyphicon-remove': setPasswordForm.oldPassword.$invalid && setPasswordForm.oldPassword.$touched || setPasswordForm.oldPassword.$invalid && setPasswordForm.$submitted}">
                        </span>

                        <div ng-show="setPasswordForm.oldPassword.$invalid && setPasswordForm.oldPassword.$touched || setPasswordForm.$submitted">
                            <span ng-show="setPasswordForm.oldPassword.$error.required" class="text-danger small">Please, provide password.</span>
                        </div>
                    </div>
                    <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched
                          || setPasswordForm.newPassword.$invalid && setPasswordForm.$submitted,
                         'has-success has-feedback': setPasswordForm.newPassword.$valid
                          || setPasswordForm.newPassword.$valid && setPasswordForm.$submitted}">
                        <label for="newPassword">New Password</label>
                        <input type="password"
                               name="newPassword"
                               class="form-control"
                               placeholder="Enter New Password"
                               ng-model="userCtrl.passwordModel.newPassword"
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}"
                               required />

                        <span class="glyphicon form-control-feedback"
                              ng-class="{'glyphicon-ok': setPasswordForm.newPassword.$valid || setPasswordForm.newPassword.$valid && setPasswordForm.$submitted,
                          'glyphicon-remove': setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched || setPasswordForm.newPassword.$invalid && setPasswordForm.$submitted}">
                        </span>

                        <div ng-show="setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched || setPasswordForm.$submitted">
                            <span ng-show="setPasswordForm.newPassword.$error.required" class="text-danger small">Please, provide password.</span>
                            <span ng-show="setPasswordForm.newPassword.$error.pattern" class="text-danger small">Password must contain atleast 8 charachters, numbers, uppercase letter and special charachter.</span>
                        </div>
                    </div>
                    <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched
                          || setPasswordForm.confirmPassword.$invalid && setPasswordForm.$submitted || (userCtrl.passwordModel.newPassword !== userCtrl.passwordModel.confirmPassword) && setPasswordForm.confirmPassword.$touched,
                         'has-success has-feedback': setPasswordForm.confirmPassword.$valid
                          || setPasswordForm.confirmPassword.$valid && setPasswordForm.$submitted || (userCtrl.passwordModel.newPassword === userCtrl.passwordModel.confirmPassword) && setPasswordForm.confirmPassword.$touched }">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password"
                               name="confirmPassword"
                               class="form-control"
                               placeholder="Enter New Password"
                               ng-model="userCtrl.passwordModel.confirmPassword"
                               required />
                        <span class="glyphicon form-control-feedback"
                              ng-class="{'glyphicon-ok': setPasswordForm.confirmPassword.$valid || setPasswordForm.confirmPassword.$valid && setPasswordForm.$submitted || (userCtrl.passwordModel.newPassword === userCtrl.passwordModel.confirmPassword) && setPasswordForm.confirmPassword.$touched,
                    'glyphicon-remove': setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched
                    || setPasswordForm.confirmPassword.$invalid && setPasswordForm.$submitted
                    || (userCtrl.passwordModel.newPassword !== userCtrl.passwordModel.confirmPassword)
                    && setPasswordForm.confirmPassword.$touched}">
                        </span>

                        <div ng-show="setPasswordForm.confirmPassword.$dirty || setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched || setPasswordForm.$submitted">
                            <span ng-show="setPasswordForm.confirmPassword.$error.required" class="text-danger small">Please, provide password same as above.</span>
                            <span ng-show="(!setPasswordForm.confirmPassword.$error.required) && (userCtrl.passwordModel.newPassword !== userCtrl.passwordModel.confirmPassword)" class="text-danger small">Password doesn't match</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Change Password" ng-disabled="setPasswordForm.$invalid" class="btn btn-success col-md-12" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>