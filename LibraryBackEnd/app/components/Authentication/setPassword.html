<div class="page-header">
    <h2 class="text-center">Set Password</h2>
</div>


<div class="col-md-offset-3 col-md-6">

    <!-- Panel Starts Here -->
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Set Password</h3>
        </div>
        <!-- Panel Body Starts Here -->
        <div class="panel-body">
            <!-- Form Starts Here -->
            <form name="setPasswordForm" ng-submit="authCtrl.setPassword()" novalidate>
                <!-- New Password Field -->
                <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched
                          || setPasswordForm.newPassword.$invalid && setPasswordForm.$submitted,
                         'has-success has-feedback': setPasswordForm.newPassword.$valid
                          || setPasswordForm.newPassword.$valid && setPasswordForm.$submitted}">
                    <label for="newPassword">New Password</label>
                    <input type="password" placeholder="Enter New Password" name="newPassword" class="form-control" ng-minlength="8" ng-model="authCtrl.setNewPassword.password" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}" required />

                    <span class="glyphicon form-control-feedback"
                          ng-class="{'glyphicon-ok': setPasswordForm.newPassword.$valid || setPasswordForm.newPassword.$valid && setPasswordForm.$submitted,
                          'glyphicon-remove': setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched || setPasswordForm.newPassword.$invalid && setPasswordForm.$submitted}">
                    </span>

                    <div ng-show="setPasswordForm.newPassword.$invalid && setPasswordForm.newPassword.$touched || setPasswordForm.$submitted">
                        <span ng-show="setPasswordForm.newPassword.$error.required" class="text-danger small">Please, provide password.</span>
                        <span ng-show="setPasswordForm.newPassword.$error.pattern" class="text-danger small">Password must contain atleast 8 charachters, numbers, uppercase letter and special charachter.</span>
                    </div>
                </div>

                <div class="form-group" ng-class="{'has-error has-feedback': setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched
                          || setPasswordForm.confirmPassword.$invalid && setPasswordForm.$submitted || (authCtrl.setNewPassword.password !== authCtrl.setNewPassword.confirmPassword) && setPasswordForm.confirmPassword.$touched,
                         'has-success has-feedback': setPasswordForm.confirmPassword.$valid
                          || setPasswordForm.confirmPassword.$valid && setPasswordForm.$submitted || (authCtrl.setNewPassword.password === authCtrl.setNewPassword.confirmPassword) && setPasswordForm.confirmPassword.$touched }">

                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" placeholder="Enter Confirm Password" name="confirmPassword" class="form-control" ng-model="authCtrl.setNewPassword.confirmPassword" required />

                    <span class="glyphicon form-control-feedback"
                          ng-class="{'glyphicon-ok': setPasswordForm.confirmPassword.$valid || setPasswordForm.confirmPassword.$valid && setPasswordForm.$submitted || (authCtrl.setNewPassword.password === authCtrl.setNewPassword.confirmPassword) && setPasswordForm.confirmPassword.$touched,
                          'glyphicon-remove': setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched
                          || setPasswordForm.confirmPassword.$invalid && setPasswordForm.$submitted
                          || (authCtrl.setNewPassword.password !== authCtrl.setNewPassword.confirmPassword)
                          && setPasswordForm.confirmPassword.$touched}">
                    </span>

                    <div ng-show="setPasswordForm.confirmPassword.$dirty || setPasswordForm.confirmPassword.$invalid && setPasswordForm.confirmPassword.$touched || setPasswordForm.$submitted">
                        <span ng-show="setPasswordForm.confirmPassword.$error.required" class="text-danger small">Please, provide password same as above.</span>
                        <span ng-show="(!setPasswordForm.confirmPassword.$error.required) && (authCtrl.setNewPassword.password !== authCtrl.setNewPassword.confirmPassword)" class="text-danger small">Password doesn't match</span>
                    </div>
                </div>

                <input type="submit" value="Reset Password" class="btn btn-success form-control" />

            </form>

        </div>
    </div>
</div>
